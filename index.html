<!DOCTYPE html>
<html lang="ps">
<head>
  <meta charset="UTF-8">
  <title>MEGAMART 8 - Firebase + Nav</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      text-align: center;
    }
    main {
      padding-bottom: 60px;
    }
    .section {
      display: none;
    }
    .active {
      display: block;
    }
    nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #007BFF;
      display: flex;
      justify-content: space-around;
      padding: 10px 0;
    }
    nav button {
      background: none;
      border: none;
      color: #fff;
      font-size: 20px;
    }
    nav button.create {
      background: #fff;
      color: #007BFF;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 30px;
      margin-top: -30px;
    }
    input, textarea {
      display: block;
      margin: 10px auto;
      padding: 8px;
      width: 80%;
    }
    button.save {
      padding: 10px 20px;
      background: #28a745;
      color: #fff;
      border: none;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      background: #f0f0f0;
      margin: 5px auto;
      width: 80%;
      padding: 10px;
      border-radius: 5px;
    }
  </style>
  <script type="module">
    // âœ… Firebase ImportÙˆÙ†Ù‡
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "Ø³ØªØ§ api key",
      authDomain: "Ø³ØªØ§ auth domain",
      projectId: "Ø³ØªØ§ project id",
      storageBucket: "Ø³ØªØ§ storage",
      messagingSenderId: "Ø³ØªØ§ msg sender id",
      appId: "Ø³ØªØ§ app id"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    window.saveProduct = async () => {
      const name = document.getElementById('pName').value;
      const price = document.getElementById('pPrice').value;
      const location = document.getElementById('pLoc').value;
      const detail = document.getElementById('pDetail').value;

      await addDoc(collection(db, "products"), {
        name: name,
        price: price,
        location: location,
        detail: detail
      });

      alert("Product Saved!");
      showSection('home'); // Save ÙˆØ±ÙˆØ³ØªÙ‡ Ø¨ÛØ±ØªÙ‡ Home ØªÙ‡ ÚÙŠ
      loadProducts();
    };

    window.loadProducts = async () => {
      const querySnapshot = await getDocs(collection(db, "products"));
      const list = document.getElementById('productList');
      list.innerHTML = '';
      querySnapshot.forEach((doc) => {
        const data = doc.data();
        list.innerHTML += `<li>${data.name} - Rs.${data.price}<br/>ğŸ“ ${data.location}<br/>${data.detail}</li>`;
      });
    };

    window.showSection = (id) => {
      document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      if (id === 'home') loadProducts();
    };
  </script>
</head>
<body onload="showSection('home')">
  <main>
    <!-- ğŸ  Home Section -->
    <section id="home" class="section active">
      <h1>ğŸ  Home</h1>
      <ul id="productList"></ul>
    </section>

    <!-- â• Create Section -->
    <section id="create" class="section">
      <h1>â• Create Product</h1>
      <input id="pName" placeholder="Product Name" />
      <input id="pPrice" placeholder="Price" type="number" />
      <input id="pLoc" placeholder="Location" />
      <textarea id="pDetail" placeholder="Detail"></textarea>
      <button class="save" onclick="saveProduct()">Save Product</button>
    </section>

    <!-- ğŸ‘¤ Profile Section -->
    <section id="profile" class="section">
      <h1>ğŸ‘¤ Profile</h1>
      <p>Register/Login System Ø¨Ù‡ ÙˆØ±ÙˆØ³ØªÙ‡ ÙˆØ±Ø²ÛŒØ§ØªÙˆ!</p>
    </section>
  </main>

  <!-- âœ… Bottom Navigation -->
  <nav>
    <button onclick="showSection('home')">ğŸ </button>
    <button class="create" onclick="showSection('create')">+</button>
    <button onclick="showSection('profile')">ğŸ‘¤</button>
  </nav>
</body>
</html>